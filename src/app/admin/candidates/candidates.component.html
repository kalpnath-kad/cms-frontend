<h2>Users List</h2>

<form [formGroup]="filterForm" (ngSubmit)="applyFilters()">
  <div class="filter-container">
    <input formControlName="name" placeholder="Name" />
    <input formControlName="phone_number" placeholder="Phone Number" />
    <input formControlName="email" placeholder="Uploader Email" />
    <input formControlName="connectedTemple" placeholder="Connected Temple" />
    <input formControlName="fromDate" type="date" />
    <input formControlName="toDate" type="date" />

    <button type="submit">Apply Filters</button>
    <button type="button" (click)="resetFilters()">Reset</button>
  </div>
</form>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>DOB</th>
      <th>Gender</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Connected Temple</th>
      <th>Uploader</th>
      <th>Uploaded At</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of filteredUsers">
      <!-- <td>{{ user.name }}</td> -->
      <td>
        <a [routerLink]="['/admin/candidates', user.id]">{{ user.name }}</a>
      </td>
      <td>{{ user.date_of_birth | date: 'mediumDate' }}</td>
      <td>{{ user.gender }}</td>
      <td>{{ user.phone_number }}</td>
      <td>{{ user.present_address }}</td>
      <td>{{ user.connected_temple }}</td>
      <td>{{ user.uploader?.email || 'N/A' }}</td>
      <td>{{ user.createdAt | date: 'short' }}</td>
    </tr>
  </tbody>
</table>

<div class="pagination">
  <button (click)="prevPage()" [disabled]="page === 1">Previous</button>
  <span>Page {{ page }}</span>
  <button (click)="nextPage()" [disabled]="page * limit >= totalUsers">Next</button>
</div>

<form [formGroup]="limitForm">
  <label for="limitSelect">Items per page:</label>
  <select id="limitSelect" formControlName="limit" (change)="onLimitChange()">
    <option [value]="5">5</option>
    <option [value]="10">10</option>
    <option [value]="25">25</option>
    <option [value]="100">100</option>
  </select>
</form>